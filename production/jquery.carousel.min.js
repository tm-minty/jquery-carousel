(function(a){a.fn.carousel=function(d){var g={backButton:".back",forwardButton:".forward",elementsContainer:".wrapper",slideCount:1,duration:500,elements:"li",loop:true,beforeSlide:undefined,afterSlide:undefined,easing:"",vertical:false};d=a.extend(g,d);var c={getOuterWidth:function(i){var h;if(i!==undefined&&i.length===undefined){h=a(i).width()+parseInt(i.css("margin-left"),10)+parseInt(i.css("margin-right"),10)+parseInt(i.css("border-left"),10)+parseInt(i.css("border-right"),10)}else{var j=0;a(i).each(function(){j+=(a(this).width()+parseInt(a(this).css("margin-left"),10)+parseInt(a(this).css("margin-right"),10)+(a(this).css("border-left")?parseInt(a(this).css("border-left"),10):0)+(a(this).css("border-right")?parseInt(a(this).css("border-right"),10):0))});h=j}return h},moveEnd:function(i){var k=a(d.elementsContainer),j=a(d.elements,k),h=j.slice(0,i);k.append(h.clone(true)).css({left:parseInt(k.css("left"),10)+c.getOuterWidth(h)});h.remove()},moveBegin:function(i){var k=a(d.elementsContainer),j=a(d.elements,k),h=j.slice(j.length-i,j.length);k.prepend(h.clone(true)).css({left:parseInt(k.css("left"),10)-c.getOuterWidth(h)});h.remove()},slideBack:function(h,m){var k=a(d.elementsContainer),j=a(d.elements,k),i=j.slice(j.length-(m||d.slideCount),j.length),l=d.left+c.getOuterWidth(i);if(!d.loop){if(l>0){l=0}d.left=l}if(typeof d.beforeSlide==="function"){d.beforeSlide.call(this,k,d)}k.animate({left:l},{duration:d.duration,queue:true,complete:function(){if(d.loop){c.moveBegin(d.slideCount)}if(typeof d.afterSlide==="function"){d.afterSlide.call(this,k,d)}}});return false},slideForward:function(h,n){var l=a(d.elementsContainer),k=a(d.elements,l),i=k.slice(0,n||d.slideCount),m=d.left-c.getOuterWidth(i);if(!d.loop){var j=c.getOuterWidth(k)-l.parent().width();if(j<=Math.abs(m)){m=j*-1}d.left=m}if(typeof d.beforeSlide==="function"){d.beforeSlide.call(this,l,d)}l.animate({left:m},{duration:d.duration,queue:true,complete:function(){if(d.loop){c.moveEnd(d.slideCount)}if(typeof d.afterSlide==="function"){d.afterSlide.call(this,l,d)}}});return false}};var f=a(d.elementsContainer),e=a(d.elements,f),b=c.getOuterWidth(e);d.left=0;d.left-=(d.loop?b:0);f.css({left:d.left});if(d.loop){f.prepend(e.clone(true)).append(e.clone(true))}return this.each(function(){a(this).bind("slide.back",a.proxy(c.slideBack,this)).bind("slide.forward",a.proxy(c.slideForward,this));a(d.backButton).bind("mousedown",a.proxy(c.slideBack,this));a(d.forwardButton).bind("mousedown",a.proxy(c.slideForward,this))})}}(jQuery));