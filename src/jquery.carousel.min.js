(function(b){b.fn.carousel=function(a){a=b.extend({backButton:".back",forwardButton:".forward",elementsContainer:".wrapper",slideCount:1,duration:500,elements:"li",loop:!0,beforeSlide:void 0,afterSlide:void 0,easing:"",vertical:!1},a);var g={getOuterWidth:function(a){if(void 0!==a&&void 0===a.length)a=b(a).width()+parseInt(a.css("margin-left"),10)+parseInt(a.css("margin-right"),10)+parseInt(a.css("border-left"),10)+parseInt(a.css("border-right"),10);else{var d=0;b(a).each(function(){d+=b(this).width()+
    parseInt(b(this).css("margin-left"),10)+parseInt(b(this).css("margin-right"),10)+(b(this).css("border-left")?parseInt(b(this).css("border-left"),10):0)+(b(this).css("border-right")?parseInt(b(this).css("border-right"),10):0)});a=d}return a},moveEnd:function(f){var d=b(a.elementsContainer);f=b(a.elements,d).slice(0,f);d.append(f.clone(!0)).css({left:parseInt(d.css("left"),10)+g.getOuterWidth(f)});f.remove()},moveBegin:function(f){var d=b(a.elementsContainer),e=b(a.elements,d);f=e.slice(e.length-f,
    e.length);d.prepend(f.clone(!0)).css({left:parseInt(d.css("left"),10)-g.getOuterWidth(f)});f.remove()},slideBack:function(f,d){var e=b(a.elementsContainer),c=b(a.elements,e),c=c.slice(c.length-a.slideCount,c.length),c=a.left+g.getOuterWidth(d||c);a.loop||(0<c&&(c=0),a.left=c);"function"===typeof a.beforeSlide&&a.beforeSlide.call(this,e,a);e.animate({left:c},{duration:a.duration,queue:!0,complete:function(){a.loop&&g.moveBegin(a.slideCount);"function"===typeof a.afterSlide&&a.afterSlide.call(this,
    e,a)}});return!1},slideForward:function(f,d){var e=b(a.elementsContainer),c=b(a.elements,e),h=c.slice(0,a.slideCount),h=a.left-g.getOuterWidth(d||h);a.loop||(c=g.getOuterWidth(c)-e.parent().width(),c<=Math.abs(h)&&(h=-1*c),a.left=h);"function"===typeof a.beforeSlide&&a.beforeSlide.call(this,e,a);e.animate({left:h},{duration:a.duration,queue:!0,complete:function(){a.loop&&g.moveEnd(a.slideCount);"function"===typeof a.afterSlide&&a.afterSlide.call(this,e,a)}});return!1}},j=b(a.elementsContainer),k=
    b(a.elements,j),l=g.getOuterWidth(k);a.left=0;a.left-=a.loop?l:0;j.css({left:a.left});a.loop&&j.prepend(k.clone(!0)).append(k.clone(!0));return this.each(function(){b(this).bind("slide.back",b.proxy(g.slideBack,this)).bind("slide.forward",b.proxy(g.slideForward,this));b(a.backButton).bind("mousedown",b.proxy(g.slideBack,this));b(a.forwardButton).bind("mousedown",b.proxy(g.slideForward,this))})}})(jQuery);